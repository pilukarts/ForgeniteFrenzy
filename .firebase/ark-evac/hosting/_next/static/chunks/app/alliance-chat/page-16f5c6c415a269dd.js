(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7613],{99733:function(e,r,a){Promise.resolve().then(a.bind(a,7663))},54174:function(e,r,a){"use strict";a.d(r,{Z:function(){return t}});/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(78030).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},7663:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return g}});var t=a(57437),s=a(2265),n=a(33593),l=a(77209),i=a(89733),d=a(80023),o=a(80420),m=a(54174);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a(78030).Z)("SendHorizontal",[["path",{d:"m3 3 3 9-3 9 19-9Z",key:"1aobqy"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);var u=a(82955),f=a(27385),h=a(49354),x=a(25481);let p=()=>"msg-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9));var g=()=>{let{playerProfile:e,isLoading:r,isInitialSetupDone:a}=(0,n.G$)(),[g,y]=(0,s.useState)([]),[w,N]=(0,s.useState)(""),b=(0,s.useRef)(null);if((0,s.useEffect)(()=>{e&&y([{id:p(),senderId:"core_system",senderName:"C.O.R.E.",content:"Welcome to the Alliance Strategic Comms, Commander. Coordinate with your allies here.",timestamp:Date.now()-2e4,isPlayer:!1,senderAvatar:x.vE.t},{id:p(),senderId:"commander_alpha",senderName:"Cmdr. Alpha",content:"Glad to be here. Let's push for the next objective!",timestamp:Date.now()-1e4,isPlayer:!1,senderAvatar:x.tE.Kj}])},[e]),(0,s.useEffect)(()=>{if(b.current){let e=b.current.querySelector("div[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}},[g]),r)return(0,t.jsx)(f.Z,{});if(!a)return(0,t.jsx)(u.Z,{});if(!e)return null;let j=r=>r.isPlayer?"male"===e.commanderSex?x.tE.Kj:x.tE.f$:r.senderAvatar||x.Ri.T,v=r=>r.isPlayer&&e?"male"===e.commanderSex?"male commander":"female commander":"core_system"===r.senderId?"ai hexagon":"male commander";return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("header",{className:"p-3 sm:p-4 border-b border-border",children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl font-headline text-primary",children:"Alliance Chat"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Coordinate with your fellow Commanders."})]}),(0,t.jsxs)(d.x,{className:"flex-grow p-2 sm:p-4",ref:b,children:[" ",(0,t.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[" ",g.map(e=>(0,t.jsxs)("div",{className:(0,h.cn)("flex items-start gap-2 sm:gap-3 max-w-[90%] sm:max-w-[75%]",e.isPlayer?"ml-auto flex-row-reverse":"mr-auto"),children:[(0,t.jsxs)(o.qE,{className:"h-6 w-6 sm:h-8 sm:w-8 border border-primary/50",children:[" ",(0,t.jsx)(o.F$,{src:j(e),alt:e.senderName,"data-ai-hint":v(e)}),(0,t.jsx)(o.Q5,{children:e.senderName?e.senderName.substring(0,1).toUpperCase():(0,t.jsx)(m.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),(0,t.jsxs)("div",{className:(0,h.cn)("p-2 sm:p-3 rounded-lg shadow",e.isPlayer?"bg-primary/20 text-primary-foreground rounded-br-none":"bg-card text-card-foreground rounded-bl-none"),children:[(0,t.jsxs)("p",{className:"font-semibold mb-0.5 sm:mb-1",children:[" ",e.isPlayer?"You":e.senderName]}),(0,t.jsx)("p",{className:"text-base whitespace-pre-wrap",children:e.content}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1 sm:mt-1.5 text-right",children:[" ",new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]},e.id))]})]}),(0,t.jsxs)("footer",{className:"p-2 sm:p-4 border-t border-border mt-auto",children:[" ",(0,t.jsxs)("form",{onSubmit:r=>{if(r.preventDefault(),""===w.trim()||!e)return;let a={id:p(),senderId:e.id,senderName:e.name,senderCommanderSex:e.commanderSex,content:w.trim(),timestamp:Date.now(),isPlayer:!0};y(e=>[...e,a]),N("")},className:"flex items-center gap-2",children:[(0,t.jsx)(l.I,{type:"text",value:w,onChange:e=>N(e.target.value),placeholder:"Type your message...",className:"flex-grow bg-input border-border focus:ring-primary h-9 sm:h-10 text-base",autoComplete:"off"}),(0,t.jsxs)(i.z,{type:"submit",variant:"default",size:"sm","aria-label":"Send Message",disabled:!w.trim(),children:[" ",(0,t.jsx)(c,{className:"h-4 w-4 sm:h-5 sm:w-5"})," "]})]})]})]})})}},80420:function(e,r,a){"use strict";a.d(r,{F$:function(){return d},Q5:function(){return o},qE:function(){return i}});var t=a(57437),s=a(2265),n=a(44458),l=a(49354);let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(n.fC,{ref:r,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});i.displayName=n.fC.displayName;let d=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(n.Ee,{ref:r,className:(0,l.cn)("aspect-square h-full w-full",a),...s})});d.displayName=n.Ee.displayName;let o=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(n.NY,{ref:r,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});o.displayName=n.NY.displayName},44458:function(e,r,a){"use strict";a.d(r,{Ee:function(){return N},NY:function(){return b},fC:function(){return w}});var t=a(2265),s=a(98324),n=a(75137),l=a(1336),i=a(25171),d=a(57437),o="Avatar",[m,c]=(0,s.b)(o),[u,f]=m(o),h=t.forwardRef((e,r)=>{let{__scopeAvatar:a,...s}=e,[n,l]=t.useState("idle");return(0,d.jsx)(u,{scope:a,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,d.jsx)(i.WV.span,{...s,ref:r})})});h.displayName=o;var x="AvatarImage",p=t.forwardRef((e,r)=>{let{__scopeAvatar:a,src:s,onLoadingStatusChange:o=()=>{},...m}=e,c=f(x,a),u=function(e,r){let[a,s]=t.useState("idle");return(0,l.b)(()=>{if(!e){s("error");return}let a=!0,t=new window.Image,n=e=>()=>{a&&s(e)};return s("loading"),t.onload=n("loaded"),t.onerror=n("error"),t.src=e,r&&(t.referrerPolicy=r),()=>{a=!1}},[e,r]),a}(s,m.referrerPolicy),h=(0,n.W)(e=>{o(e),c.onImageLoadingStatusChange(e)});return(0,l.b)(()=>{"idle"!==u&&h(u)},[u,h]),"loaded"===u?(0,d.jsx)(i.WV.img,{...m,ref:r,src:s}):null});p.displayName=x;var g="AvatarFallback",y=t.forwardRef((e,r)=>{let{__scopeAvatar:a,delayMs:s,...n}=e,l=f(g,a),[o,m]=t.useState(void 0===s);return t.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>m(!0),s);return()=>window.clearTimeout(e)}},[s]),o&&"loaded"!==l.imageLoadingStatus?(0,d.jsx)(i.WV.span,{...n,ref:r}):null});y.displayName=g;var w=h,N=p,b=y}},function(e){e.O(0,[4358,7512,7304,2955,2971,7023,1744],function(){return e(e.s=99733)}),_N_E=e.O()}]);