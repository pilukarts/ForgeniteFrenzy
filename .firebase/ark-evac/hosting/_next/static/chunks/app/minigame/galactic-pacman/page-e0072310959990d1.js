(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8e3],{91525:function(e,t,s){Promise.resolve().then(s.bind(s,51694))},95137:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(78030).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},71976:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(78030).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},63541:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(78030).Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},68954:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(78030).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},51694:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(57437),n=s(2265),a=s(33593),i=s(82955),l=s(27385),c=s(89733),o=s(48185),u=s(17355),d=s(68954),h=s(29338),x=s(63541),f=s(95137),m=s(71976);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,s(78030).Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var y=s(86763),j=s(34446),v=s(21513),g=s(2183);let w=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,1,2,2,2,2,2,2,1],[1,2,1,1,2,1,2,1,2,1,2,1,1,2,1],[1,2,2,2,2,1,2,2,2,1,2,2,2,2,1],[1,1,1,2,1,1,1,2,1,1,1,2,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,2,2,2,2,2,2,0,2,2,2,2,2,2,1],[1,1,1,1,2,1,1,1,1,1,2,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,2,1,2,1,2,1,2,1,1,2,1],[1,2,2,1,2,2,2,2,2,2,2,1,2,2,1],[1,2,1,1,1,1,1,2,1,1,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];var k=()=>{let{addPoints:e,playerProfile:t}=(0,a.G$)(),{toast:s}=(0,y.pm)(),[i,l]=(0,n.useState)(w),[k,b]=(0,n.useState)({x:7,y:7}),[N,E]=(0,n.useState)({x:1,y:1}),[C,Z]=(0,n.useState)(null),[z,L]=(0,n.useState)(0),[M,R]=(0,n.useState)(!1),S=(0,n.useRef)(),O=(0,n.useRef)(w.flat().filter(e=>2===e).length),P=(0,n.useCallback)(()=>{l(w),b({x:7,y:7}),E({x:1,y:1}),Z(null),L(0),R(!1)},[]),A=(0,n.useCallback)((e,t)=>{if(!t)return e;let{x:s,y:r}=e;switch(t){case"UP":r--;break;case"DOWN":r++;break;case"LEFT":s--;break;case"RIGHT":s++}return i[r]&&1!==i[r][s]?{x:s,y:r}:e},[i]),I=(0,n.useCallback)(()=>{M||(b(e=>{let t=A(e,C);return 2===i[t.y][t.x]&&(L(e=>e+10),l(e=>{let s=e.map(e=>[...e]);return s[t.y][t.x]=0,s})),t}),E(e=>{let{x:t,y:s}=e,{x:r,y:n}=k;return t<r&&1!==i[s][t+1]?t++:t>r&&1!==i[s][t-1]?t--:s<n&&1!==i[s+1][t]?s++:s>n&&1!==i[s-1][t]&&s--,{x:t,y:s}}))},[M,C,A,i,k]);(0,n.useEffect)(()=>{if(!M)return S.current=setInterval(I,200),()=>clearInterval(S.current)},[I,M]),(0,n.useEffect)(()=>{k.x===N.x&&k.y===N.y&&(R("LOSE"),s({title:"Caught!",description:"The patrol drone caught you. Try again!",variant:"destructive"})),z===10*O.current&&O.current>0&&(R("WIN"),e(5e3),s({title:"Success!",description:"Labrynth cleared! You earned a bonus of ".concat(5e3.toLocaleString()," points.")}))},[k,N,z,e,s]),(0,n.useEffect)(()=>{let e=e=>{switch(e.preventDefault(),e.key){case"ArrowUp":Z("UP");break;case"ArrowDown":Z("DOWN");break;case"ArrowLeft":Z("LEFT");break;case"ArrowRight":Z("RIGHT")}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let T=(e,t,s)=>{let n=k.x===t&&k.y===s,a=N.x===t&&N.y===s;return 1===e?(0,r.jsx)("div",{className:"bg-border"},"".concat(t,"-").concat(s)):(0,r.jsxs)("div",{className:"bg-background/50 flex items-center justify-center",children:[n&&(0,r.jsx)(u.Z,{className:"text-primary h-5 w-5"}),a&&(0,r.jsx)(d.Z,{className:"text-destructive h-5 w-5"}),!n&&!a&&2===e&&(0,r.jsx)(h.Z,{className:"text-yellow-400 h-3 w-3 fill-current"})]},"".concat(t,"-").concat(s))};return t?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(o.Zb,{className:"w-full max-w-lg mx-auto bg-card/50",children:(0,r.jsxs)(o.aY,{className:"p-2 sm:p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("p",{className:"text-lg font-headline text-primary",children:["Score: ",z]}),(0,r.jsxs)("p",{className:"text-lg font-headline text-primary",children:["Star Fragments Left: ",O.current-z/10]})]}),(0,r.jsxs)("div",{className:"grid border-2 border-primary relative",style:{gridTemplateColumns:"repeat(".concat(15,", ").concat(24,"px)"),width:360,height:360},children:[(0,r.jsx)(j.M,{children:M&&(0,r.jsxs)(v.E.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center z-10",children:[(0,r.jsx)("p",{className:"text-4xl font-headline text-destructive mb-2",children:"LOSE"===M?"Game Over":"You Win!"}),(0,r.jsx)(c.z,{onClick:P,children:"Play Again"})]})}),i.map((e,t)=>e.map((e,s)=>T(e,s,t)))]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 w-48",children:[(0,r.jsx)("div",{}),(0,r.jsx)(c.z,{variant:"outline",size:"icon",onClick:()=>Z("UP"),className:"h-14 w-14",children:(0,r.jsx)(x.Z,{})}),(0,r.jsx)("div",{}),(0,r.jsx)(c.z,{variant:"outline",size:"icon",onClick:()=>Z("LEFT"),className:"h-14 w-14",children:(0,r.jsx)(f.Z,{})}),(0,r.jsx)("div",{}),(0,r.jsx)(c.z,{variant:"outline",size:"icon",onClick:()=>Z("RIGHT"),className:"h-14 w-14",children:(0,r.jsx)(m.Z,{})}),(0,r.jsx)("div",{}),(0,r.jsx)(c.z,{variant:"outline",size:"icon",onClick:()=>Z("DOWN"),className:"h-14 w-14",children:(0,r.jsx)(p,{})}),(0,r.jsx)("div",{})]})]}):(0,r.jsx)(g.O,{className:"w-[360px] h-[480px]"})},b=s(87138),N=()=>{let{isLoading:e,isInitialSetupDone:t}=(0,a.G$)();return e?(0,r.jsx)(l.Z,{}):t?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-6 h-full flex flex-col",children:[(0,r.jsxs)("header",{className:"mb-2 text-center relative",children:[(0,r.jsx)(b.default,{href:"/arcade",className:"absolute left-0 top-1/2 -translate-y-1/2",children:(0,r.jsx)(c.z,{variant:"ghost",size:"icon",children:(0,r.jsx)(f.Z,{className:"h-6 w-6"})})}),(0,r.jsxs)("h1",{className:"text-2xl sm:text-3xl font-headline text-primary flex items-center justify-center",children:[(0,r.jsx)(u.Z,{className:"mr-2 sm:mr-3 h-6 w-6 sm:h-8 sm:w-8"}),"Galactic Labyrinth"]}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Collect star fragments and avoid the patrol drone."})]}),(0,r.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,r.jsx)(k,{})})]})}):(0,r.jsx)(i.Z,{})}},2183:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var r=s(57437),n=s(49354);function a(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...s})}},34446:function(e,t,s){"use strict";s.d(t,{M:function(){return y}});var r=s(57437),n=s(2265),a=s(5050),i=s(30458),l=s(67797),c=s(29791);class o extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:s}=e,a=(0,n.useId)(),i=(0,n.useRef)(null),l=(0,n.useRef)({width:0,height:0,top:0,left:0}),{nonce:u}=(0,n.useContext)(c._);return(0,n.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:n}=l.current;if(s||!i.current||!e||!t)return;i.current.dataset.motionPopId=a;let c=document.createElement("style");return u&&(c.nonce=u),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(n,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[s]),(0,r.jsx)(o,{isPresent:s,childRef:i,sizeRef:l,children:n.cloneElement(t,{ref:i})})}let d=e=>{let{children:t,initial:s,isPresent:a,onExitComplete:c,custom:o,presenceAffectsLayout:d,mode:x}=e,f=(0,i.h)(h),m=(0,n.useId)(),p=(0,n.useCallback)(e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;c&&c()},[f,c]),y=(0,n.useMemo)(()=>({id:m,initial:s,isPresent:a,custom:o,onExitComplete:p,register:e=>(f.set(e,!1),()=>f.delete(e))}),d?[Math.random(),p]:[a,p]);return(0,n.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[a]),n.useEffect(()=>{a||f.size||!c||c()},[a]),"popLayout"===x&&(t=(0,r.jsx)(u,{isPresent:a,children:t})),(0,r.jsx)(l.O.Provider,{value:y,children:t})};function h(){return new Map}var x=s(73241);let f=e=>e.key||"";function m(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}var p=s(9033);let y=e=>{let{children:t,custom:s,initial:l=!0,onExitComplete:c,presenceAffectsLayout:o=!0,mode:u="sync",propagate:h=!1}=e,[y,j]=(0,x.oO)(h),v=(0,n.useMemo)(()=>m(t),[t]),g=h&&!y?[]:v.map(f),w=(0,n.useRef)(!0),k=(0,n.useRef)(v),b=(0,i.h)(()=>new Map),[N,E]=(0,n.useState)(v),[C,Z]=(0,n.useState)(v);(0,p.L)(()=>{w.current=!1,k.current=v;for(let e=0;e<C.length;e++){let t=f(C[e]);g.includes(t)?b.delete(t):!0!==b.get(t)&&b.set(t,!1)}},[C,g.length,g.join("-")]);let z=[];if(v!==N){let e=[...v];for(let t=0;t<C.length;t++){let s=C[t],r=f(s);g.includes(r)||(e.splice(t,0,s),z.push(s))}"wait"===u&&z.length&&(e=z),Z(m(e)),E(v);return}let{forceRender:L}=(0,n.useContext)(a.p);return(0,r.jsx)(r.Fragment,{children:C.map(e=>{let t=f(e),n=(!h||!!y)&&(v===C||g.includes(t));return(0,r.jsx)(d,{isPresent:n,initial:(!w.current||!!l)&&void 0,custom:n?void 0:s,presenceAffectsLayout:o,mode:u,onExitComplete:n?void 0:()=>{if(!b.has(t))return;b.set(t,!0);let e=!0;b.forEach(t=>{t||(e=!1)}),e&&(null==L||L(),Z(k.current),h&&(null==j||j()),c&&c())},children:e},t)})})}}},function(e){e.O(0,[4358,7512,7304,7138,2955,2971,7023,1744],function(){return e(e.s=91525)}),_N_E=e.O()}]);